(function(e){function t(t){for(var r,s,c=t[0],o=t[1],i=t[2],f=0,p=[];f<c.length;f++)s=c[f],Object.prototype.hasOwnProperty.call(u,s)&&u[s]&&p.push(u[s][0]),u[s]=0;for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r]);l&&l(t);while(p.length)p.shift()();return a.push.apply(a,i||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,c=1;c<n.length;c++){var o=n[c];0!==u[o]&&(r=!1)}r&&(a.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},u={app:0},a=[];function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],o=c.push.bind(c);c.push=t,c=c.slice();for(var i=0;i<c.length;i++)t(c[i]);var l=o;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"034f":function(e,t,n){"use strict";var r=n("64a9"),u=n.n(r);u.a},2532:function(e,t,n){},"2d0e":function(e,t,n){"use strict";var r=n("e764"),u=n.n(r);u.a},"4ba7":function(e,t,n){"use strict";var r=n("e55e"),u=n.n(r);u.a},"4d04":function(e,t,n){"use strict";var r=n("ea03"),u=n.n(r);u.a},"51c9":function(e,t,n){"use strict";var r=n("2532"),u=n.n(r);u.a},"64a9":function(e,t,n){},"6cf3":function(e,t,n){"use strict";var r=n("8b1b"),u=n.n(r);u.a},"8b1b":function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var r=n("2b0e"),u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("nav",{staticClass:"nav-bar"},[n("router-link",{attrs:{to:"/runes"}},[e._v("Runes")]),n("router-link",{attrs:{to:{name:"chat",params:{id:e.currentChat}}}},[e._v("Chat")]),e.loggedIn?n("span",{on:{click:e.logOut}},[e._v(e._s(e.userName))]):n("router-link",{attrs:{to:"/login"}},[e._v("Log in")])],1),n("router-view")],1)},a=[],s=(n("96cf"),n("3b8d")),c=(n("7f7f"),n("750b")),o=n("bce4");function i(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(o["c"])(t)}function l(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(o["b"])(t)}var f=function(e){return e.reduce(function(e,t){return e+("string"===typeof t?t:String.fromCharCode(t.codepoint))},"")},p=Object(c["b"])({setup:function(e,t){var n=i("user","currentChat","loggedIn"),r=n.user,u=n.currentChat,a=n.loggedIn,f=Object(o["d"])(),p=f.router,d=f.route,h=Object(c["a"])(function(){return a.value?r.value.name:""});function m(){return b.apply(this,arguments)}function b(){return b=Object(s["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l("logOut").logOut();case 2:d.value.matched.some(function(e){var t=e.meta;return t.requiresAuth})&&p.push("/");case 3:case"end":return e.stop()}},e)})),b.apply(this,arguments)}return{currentChat:u,loggedIn:a,logOut:m,userName:h}}}),d=p,h=(n("034f"),n("2877")),m=Object(h["a"])(d,u,a,!1,null,null,null),b=m.exports,v=(n("8e6e"),n("ac6a"),n("456d"),n("bd86")),g=(n("7514"),n("2f62")),O=n("8aa5"),j=n.n(O),_=n("3317");function y(e,t){return Object(_["b"])(function(){var n=Object(s["a"])(regeneratorRuntime.mark(function n(r,u){var a;return regeneratorRuntime.wrap(function(n){while(1)switch(n.prev=n.next){case 0:return a=r.bindFirestoreRef,n.abrupt("return",a(e,t(u)));case 2:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}())}function w(e,t){return Object(_["a"])(function(){var n=Object(s["a"])(regeneratorRuntime.mark(function n(r,u){var a;return regeneratorRuntime.wrap(function(n){while(1)switch(n.prev=n.next){case 0:return a=r.bindFirebaseRef,n.abrupt("return",a(e,t(u)));case 2:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}())}function C(e){return Object(_["a"])(function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(n){var r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r=n.unbindFirebaseRef,t.abrupt("return",r(e));case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())}function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(n,!0).forEach(function(t){Object(v["a"])(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var x={apiKey:"AIzaSyBBpBbncl_mEM2NwZIBKL3Fe11CPOULT58",authDomain:"rau.firebaseapp.com",databaseURL:"https://rau.firebaseio.com",projectId:"firebase-rau",storageBucket:"firebase-rau.appspot.com",messagingSenderId:"248482438873",appId:"1:248482438873:web:1f9f4ea54343c8d7"};j.a.initializeApp(x);var S=j.a.database(),E=j.a.firestore(),P=j.a.auth();P.useDeviceLanguage(),r["a"].use(g["a"]);var k={getRuneByName:function(e){return function(t){return e.runes.find(function(e){return e.name===t})}},runes:function(e){return e.runes},messages:function(e){return e.messages},db:function(e){return S},currentChat:function(e){return e.currentChat},loggedIn:function(e){return null!==e.user},user:function(e){return e.user}},U={setRunesRef:y("runes",function(e){return E.collection(e).orderBy("codepoint")}),setMessagesRef:w("messages",function(e){return S.ref(e)}),setChat:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:r=t.commit,r("SET_CHAT",n);case 2:case"end":return e.stop()}},e)}));function t(t,n){return e.apply(this,arguments)}return t}(),setUserID:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t,n){var r,u;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:r=t.commit,u=t.dispatch,r("SET_USER_ID",n||""),n?u("setUser",n):u("removeUser");case 3:case"end":return e.stop()}},e)}));function t(t,n){return e.apply(this,arguments)}return t}(),setUser:w("user",function(e){return S.ref("users").child(e)}),removeUser:C("user"),logOut:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,P.signOut();case 2:case"end":return e.stop()}},e)}));function t(){return e.apply(this,arguments)}return t}()},D=new g["a"].Store({state:{runes:[],messages:{},settings:{},userid:"",user:null,currentChat:"broadcast"},mutations:I({SET_USER_ID:function(e,t){e.userid=t},SET_CHAT:function(e,t){e.currentChat=t}},_["c"]),getters:k,actions:U}),A=n("8c4f"),T=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{attrs:{id:"firebaseui-auth-container"}})},B=[],$=n("2398"),M={callbacks:{},signInOptions:[O["auth"].GoogleAuthProvider.PROVIDER_ID,O["auth"].GithubAuthProvider.PROVIDER_ID,O["auth"].FacebookAuthProvider.PROVIDER_ID]},q=Object(c["b"])({setup:function(e,t){var n=Object(o["d"])(),r=n.route,u=n.router,a=$["a"].AuthUI.getInstance();return Object(c["d"])(function(){var e=r.value.query.redirectUrl||"/";a||(a=new $["a"].AuthUI(Object(O["auth"])()),M.callbacks={signInSuccessWithAuthResult:function(t,n){return console.log("Redirection to:",n,"\nQuery:",e),u.push(e),!1}}),a.start("#firebaseui-auth-container",Object.assign({signInSuccessUrl:e},M))}),{}}}),N=q,L=Object(h["a"])(N,T,B,!1,null,null,null),F=L.exports,z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("table",{attrs:{id:"runeTable"}},[e._m(0),e._l(e.runes,function(t){return n("tr",{key:t.name},[n("td",[e._v(e._s(String.fromCharCode(t.codepoint)))]),n("td",[e._v(e._s(t.name))]),n("td",[e._v(e._s(t.codepoint.toString(16).toUpperCase()))]),n("td",[e._v(e._s(t.latinInput))]),n("td",[e._v(e._s(t.category))])])})],2)},G=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("tr",[n("th",[e._v("Rune")]),n("th",[e._v("Name")]),n("th",[e._v("Unicode code point")]),n("th",[e._v("Latin input character")]),n("th",[e._v("Category")])])}],V=Object(c["b"])({setup:function(e,t){var n=i("runes"),r=n.runes;return{runes:r}}}),H=V,J=(n("2d0e"),Object(h["a"])(H,z,G,!1,null,null,null)),K=J.exports,Q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"not-found"},[n("div",{staticClass:"error-code"},[e._v(e._s(e.errorCode))]),e._v("\n  Page not found.\n")])},W=[],Z=Object(c["b"])({setup:function(e,t){var n=i("getRuneByName"),r=n.getRuneByName,u=Object(c["a"])(function(){var e=r.value("neve"),t=r.value("atz");return e&&t?f([e,t,e]):"404"});return{errorCode:u}}}),X=Z,Y=(n("4d04"),Object(h["a"])(X,Q,W,!1,null,"298dc027",null)),ee=Y.exports,te=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"chatpage"},[n("h5",[e._v("Showing messages for: "+e._s(e.$route.params.id))]),n("router-view")],1)},ne=[],re=Object(c["b"])({}),ue=re,ae=(n("6cf3"),Object(h["a"])(ue,te,ne,!1,null,null,null)),se=ae.exports,ce=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"listel",staticClass:"messagelist"},e._l(e.messages,function(e){return n("message",{key:e.id,attrs:{message:e}})}),1)},oe=[],ie=(n("5df3"),n("4f7f"),n("768b")),le=(n("ffc1"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"message",class:[e.sendrecieve],style:e.nameColour},[n("span",{staticClass:"messageComponentName"},[e._v(e._s(e.message.sender.name))]),n("span",{staticClass:"messageComponentDate"},[e._v(e._s(e.time))]),n("span",{staticClass:"messageComponentBody"},[e._v(e._s(e.message.text))])])}),fe=[],pe=Object(c["b"])({props:{message:{type:Object,required:!0}},setup:function(e,t){var n=Object(c["a"])(function(){var t=e.message.sender.colour;return t?{color:"rgb("+t.map(function(e){return Math.min(255,Math.max(0,e))}).join(", ")+")"}:{}}),r=i("user"),u=r.user,a=Object(c["a"])(function(){return u.value&&u.value.id===e.message.sender.id?"sent":"recieved"}),s=Object(c["a"])(function(){return new Date(e.message.time).toLocaleString("en-GB")});return{nameColour:n,sendrecieve:a,time:s}}}),de=pe,he=(n("4ba7"),Object(h["a"])(de,le,fe,!1,null,"6083783d",null)),me=he.exports,be=Object(c["b"])({components:{Message:me},setup:function(e,t){var n=i("messages","currentChat"),r=n.currentChat,u=Object(c["f"])(null),a=Object(c["a"])(function(){if(r.value){var e=n.messages.value[r.value];if(e)return Object.entries(e).map(function(e){var t=Object(ie["a"])(e,2),n=t[0],r=t[1];return{id:n,sender:{id:r.user,name:r.user},time:r.time,read:new Set(Object.keys(r.read).filter(function(e){return e})),text:r.text}})}return[]});function s(){var e=u.value,t=e.lastElementChild;t&&(e.scrollTop=t.getBoundingClientRect().top),console.log("Scrolling")}return Object(c["g"])(a,function(e,n){t.root.$nextTick(s)}),{chatID:r,listel:u,messages:a,scrollToEnd:s}},beforeRouteUpdate:function(e,t,n){var r=l("setChat"),u=r.setChat;u(e.params.id),n()}}),ve=be,ge=(n("51c9"),Object(h["a"])(ve,ce,oe,!1,null,null,null)),Oe=ge.exports;function je(){return!!Object(O["auth"])().currentUser}r["a"].use(A["a"]),Object(O["auth"])().onAuthStateChanged(function(e){e&&"login"===ye.currentRoute.name?ye.push("/"):!e&&ye.currentRoute.matched.some(function(e){return e.meta.requiresAuth})&&ye.push("/login")});var _e=[{path:"/runes",name:"runes",component:K},{path:"/chat",component:se,beforeEnter:function(e,t,n){n(function(t){t.setChat(e.params.id)})},children:[{path:":id",name:"chat",component:Oe,meta:{requiresAuth:!0}}]},{path:"/login",name:"login",component:F,beforeEnter:function(e,t,n){var r=e.query.redirectUrl||!1;je()?n(r):r?n():n({name:"login",query:{redirectUrl:t.fullPath}})}},{path:"",redirect:"/runes"},{path:"*",component:ee}],ye=new A["a"]({routes:_e});ye.beforeEach(function(e,t,n){e.matched.some(function(e){return e.meta.requiresAuth})&&!je()?n({name:"login",query:{redirectUrl:e.fullPath}}):n()});var we=ye;r["a"].use(o["a"]),r["a"].config.productionTip=!1,Object(O["auth"])().onAuthStateChanged(function(e){e?D.dispatch("setUserID",e.uid):D.dispatch("setUserID",null)}),r["a"].use(o["a"]),r["a"].use(c["c"]),D.dispatch("setRunesRef","runes"),D.dispatch("setMessagesRef","messaging"),new r["a"]({store:D,router:we,render:function(e){return e(b)}}).$mount("#app")},e55e:function(e,t,n){},e764:function(e,t,n){},ea03:function(e,t,n){}});
//# sourceMappingURL=app.f1d1001b.js.map